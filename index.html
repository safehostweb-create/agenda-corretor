<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel do Corretor</title>
<style>
  /* Reset básico */
  * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
  body { background-color: #121212; color: #fff; padding: 20px; min-height: 100vh; }

  h1, h2 { text-align: center; margin-bottom: 20px; }

  /* Login */
  .login-box {
    max-width: 400px;
    margin: 50px auto;
    background-color: #1e1e1e;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(255, 0, 128, 0.3);
  }
  .login-box input {
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    border-radius: 6px;
    border: none;
    background-color: #2c2c2c;
    color: #fff;
  }
  .login-box button {
    width: 100%;
    padding: 12px;
    background-color: #ff3399;
    border: none;
    border-radius: 6px;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
  }
  .login-box button:hover { background-color: #ff66b3; }

  /* Painel */
  #panelDiv { display: none; }
  .welcome { text-align: center; margin-bottom: 20px; color: #ff66b3; font-size: 1.2em; }

  /* Form de adição */
  .form-container {
    max-width: 600px;
    margin: 20px auto;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  .form-container input, .form-container button {
    flex: 1 1 150px;
    padding: 10px;
    border-radius: 6px;
    border: none;
  }
  .form-container input { background-color: #2c2c2c; color: #fff; }
  .form-container button { background-color: #ff3399; color: #fff; font-weight: bold; cursor: pointer; transition: 0.3s; }
  .form-container button:hover { background-color: #ff66b3; }

  /* Cards de agendamento */
  .cards-container {
    max-width: 900px;
    margin: 30px auto;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
  }
  .card {
    background-color: #1e1e1e;
    padding: 20px;
    border-radius: 10px;
    border: 2px solid #ff3399;
    transition: 0.3s;
  }
  .card:hover { border-color: #ff66b3; transform: translateY(-5px); }
  .card h3 { color: #ff66b3; margin-bottom: 10px; }
  .card p { margin: 5px 0; }

</style>
</head>
<body>

<div id="loginDiv" class="login-box">
  <h2>Login do Corretor</h2>
  <input type="text" id="username" placeholder="Nome de usuário" />
  <input type="password" id="password" placeholder="Senha" />
  <button onclick="login()">Entrar</button>
  <p id="loginError" style="color:red; text-align:center;"></p>
</div>

<div id="panelDiv">
  <h1>Painel do Corretor</h1>
  <h2 class="welcome" id="welcome"></h2>

  <div class="form-container">
    <input type="text" id="imovel" placeholder="Nome do imóvel" />
    <input type="date" id="data" />
    <input type="time" id="hora" />
    <button onclick="addAppointment()">Adicionar</button>
  </div>

  <div class="cards-container" id="cardsContainer">
    <!-- Cards de agendamento aparecerão aqui -->
  </div>
</div>

<script>
const sheetUrl = "https://api.sheetbest.com/sheets/5c119db8-bebe-428a-9f10-be9c58262adf";

// Corretores cadastrados
const users = [
  { username: "marcos", password: "123456", displayName: "Marcos Greijo" },
  { username: "joao", password: "abc123", displayName: "João Silva" }
];

let currentUser = null;

// Login
function login() {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const user = users.find(u => u.username === username && u.password === password);
  if(user) {
    currentUser = user;
    document.getElementById("loginDiv").style.display = "none";
    document.getElementById("panelDiv").style.display = "block";
    document.getElementById("welcome").innerText = `Bem-vindo, ${user.displayName}`;
    loadAppointments();
  } else {
    document.getElementById("loginError").innerText = "Usuário ou senha incorretos!";
  }
}

// Carrega agendamentos do corretor
function loadAppointments() {
  fetch(sheetUrl)
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById("cardsContainer");
      container.innerHTML = "";
      const myAppointments = data.filter(row => row.Corretor === currentUser.username);
      myAppointments.forEach(row => {
        const card = document.createElement("div");
        card.classList.add("card");
        card.innerHTML = `
          <h3>${row.Imovel || ''}</h3>
          <p><strong>Data:</strong> ${row.Data || ''}</p>
          <p><strong>Hora:</strong> ${row.Hora || ''}</p>
        `;
        container.appendChild(card);
      });
    })
    .catch(err => console.error("Erro ao carregar agenda:", err));
}

// Adiciona novo agendamento
function addAppointment() {
  const imovel = document.getElementById("imovel").value.trim();
  const data = document.getElementById("data").value;
  const hora = document.getElementById("hora").value;

  if(!imovel || !data || !hora) { alert("Preencha todos os campos!"); return; }

  fetch(sheetUrl, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      Corretor: currentUser.username,
      Imovel: imovel,
      Data: data,
      Hora: hora
    })
  })
  .then(res => res.json())
  .then(() => {
    document.getElementById("imovel").value = "";
    document.getElementById("data").value = "";
    document.getElementById("hora").value = "";
    loadAppointments();
  })
  .catch(err => console.error("Erro ao adicionar agendamento:", err));
}
</script>

</body>
</html>
