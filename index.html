<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agenda do Corretor - Sistema de Agendamento</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { box-sizing: border-box; }
.notification { animation: slideIn 0.3s ease-out; }
@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
.property-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
.time-slot { transition: all 0.2s ease; }
.available:hover { transform: scale(1.05); }
.available { background: linear-gradient(135deg, #10b981, #059669); cursor: pointer; }
.occupied { background: linear-gradient(135deg, #ef4444, #dc2626); cursor: not-allowed; }
.pending { background: linear-gradient(135deg, #f59e0b, #d97706); }
</style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
<div id="notifications" class="fixed top-4 right-4 z-50 space-y-2"></div>


<!-- Telas de login/cadastro/app -->
<div id="loginScreen" class="min-h-screen flex items-center justify-center p-4"> ... </div>
<div id="registerScreen" class="hidden min-h-screen flex items-center justify-center p-4"> ... </div>
<div id="mainApp" class="hidden"> ... </div>
<div id="clientInterface" class="hidden"></div>


<script>
window.addEventListener('load', function() {
let brokerInfo=null, properties=[], appointments=[], currentWeek=new Date(), clientCurrentWeek=new Date(), selectedProperty=null;


// --- Função fake para WhatsApp ---
async function sendWhatsApp(to, message) {
console.log("[WhatsApp] Para:", to, "Mensagem:", message);
}


// --- Salvar e carregar dados por corretor ---
function saveData(key, value) {
if (!brokerInfo?.email) return;
localStorage.setItem(`${key}_${brokerInfo.email}`, JSON.stringify(value));
}


function loadData(key) {
if (!brokerInfo?.email) return [];
return JSON.parse(localStorage.getItem(`${key}_${brokerInfo.email}`) || "[]");
}


// --- Bloqueio de horário pessoal ---
window.blockPersonalTime = function(slotDateTime) {
const reason = prompt("Motivo do bloqueio (ex: Almoço, Consulta):");
if (!reason) return;
appointments.push({
id: Date.now().toString(),
date: slotDateTime.toISOString(),
clientName: "Bloqueio Pessoal",
clientPhone: "",
clientCity: "",
property_id: "",
property_title: reason,
status: "confirmed"
});
saveData("appointments", appointments);
showNotification("Horário bloqueado com sucesso!", "success");
generateCalendar(appointments);
}


// --- generateCalendar ---
function generateCalendar(myAppointments) {
const calendar = document.getElementById('calendar');
if (!calendar) return;
const startDate = new Date(currentWeek);
startDate.setDate(startDate.getDate() - startDate.getDay());
calendar.innerHTML = '';
const days = ['Dom','Seg','Ter','Qua','Qui','Sex','Sáb'];
const hours = ['09:00','10:00','11:00','14:00','15:00','16:00','17:00'];
for (let day=0; day<7; day++) {
</html>
